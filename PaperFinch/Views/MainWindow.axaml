<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:vm="using:PaperFinch.ViewModels"
        xmlns:controls="using:PaperFinch.Controls"
        mc:Ignorable="d"
        x:Class="PaperFinch.Views.MainWindow"
        x:DataType="vm:MainWindowViewModel"
        Title="PDF Generator with Live Preview"
        Width="900"
        Height="750"
        Icon="/Assets/avalonia-logo.ico">
    <Design.DataContext>
        <vm:MainWindowViewModel/>
    </Design.DataContext>
    
    <Grid ColumnDefinitions="300,*" RowDefinitions="*">
        <!-- LEFT PANEL -->
        <ScrollViewer Grid.Column="0" VerticalScrollBarVisibility="Auto">
            <StackPanel Margin="10" Spacing="10">
                <TextBlock Text="Document Title:" FontWeight="Bold"/>
                <TextBox Watermark="Enter title..."
                         Text="{Binding Title, Mode=TwoWay}"/>
                
                <TextBlock Text="Content:"
                           FontWeight="Bold"
                           Margin="0,10,0,0"/>
                <TextBox Watermark="Enter content..."
                         AcceptsReturn="True"
                         TextWrapping="Wrap"
                         Height="150"
                         Text="{Binding Content, Mode=TwoWay}"/>
                
                <!-- Page Settings -->
                <TextBlock Text="Page Settings:"
                           FontWeight="Bold"
                           Margin="0,15,0,0"/>
                
                <TextBlock Text="Trim Size:"/>
                <ComboBox ItemsSource="{Binding TrimSizes}"
                          SelectedItem="{Binding SelectedTrimSize, Mode=TwoWay}"
                          HorizontalAlignment="Stretch">
                    <ComboBox.ItemTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding DisplayName}"/>
                        </DataTemplate>
                    </ComboBox.ItemTemplate>
                </ComboBox>
                
                <TextBlock Text="Font Size:" Margin="0,5,0,0"/>
                <Grid ColumnDefinitions="*,Auto">
                    <NumericUpDown Grid.Column="0"
                                   Value="{Binding FontSize, Mode=TwoWay}"
                                   Minimum="8"
                                   Maximum="72"
                                   Increment="1"
                                   FormatString="0"/>
                    <TextBlock Grid.Column="1" 
                               Text="pt" 
                               VerticalAlignment="Center"
                               Margin="5,0,0,0"/>
                </Grid>
                
                <TextBlock Text="Margin Size:" Margin="0,5,0,0"/>
                <Grid ColumnDefinitions="*,Auto">
                    <NumericUpDown Grid.Column="0"
                                   Value="{Binding MarginSize, Mode=TwoWay}"
                                   Minimum="0.25"
                                   Maximum="3"
                                   Increment="0.25"
                                   FormatString="0.00"/>
                    <TextBlock Grid.Column="1" 
                               Text="in" 
                               VerticalAlignment="Center"
                               Margin="5,0,0,0"/>
                </Grid>
                
                <Button Content="Generate PDF Preview"
                        HorizontalAlignment="Stretch"
                        Margin="0,15,0,0"
                        Command="{Binding GeneratePdfCommand}"/>
                
                <Button Content="Export PDF..."
                        HorizontalAlignment="Stretch"
                        Margin="0,5,0,0"
                        Command="{Binding ExportPdfCommand}"/>
                
                <TextBlock Margin="0,10,0,0"
                           Text="{Binding PageInfo}"/>
            </StackPanel>
        </ScrollViewer>
        
        <!-- RIGHT PANEL -->
        <Grid Grid.Column="1" RowDefinitions="*,Auto" Margin="10">
            <!-- PDF Preview -->
            <Border Grid.Row="0"
                    Background="LightGray"
                    Padding="10">
                <ScrollViewer HorizontalScrollBarVisibility="Auto"
                              VerticalScrollBarVisibility="Auto">
                    <controls:PdfPreviewControl x:Name="PdfPreview"
                                                MaxWidth="600"
                                                MaxHeight="800"/>
                </ScrollViewer>
            </Border>
            
            <!-- Page Navigation Controls -->
            <StackPanel Grid.Row="1"
                        Orientation="Horizontal"
                        HorizontalAlignment="Center"
                        Spacing="10"
                        Margin="0,10,0,0">
                <Button Content="&lt;&lt; First"
                        Command="{Binding GoToFirstPageCommand}"
                        Width="80"/>
                <Button Content="&lt; Previous"
                        Command="{Binding GoToPreviousPageCommand}"
                        Width="90"/>
                <Button Content="Next &gt;"
                        Command="{Binding GoToNextPageCommand}"
                        Width="90"/>
                <Button Content="Last &gt;&gt;"
                        Command="{Binding GoToLastPageCommand}"
                        Width="80"/>
            </StackPanel>
        </Grid>
    </Grid>
</Window>